<div style="height: calc(100% - 20px)">
  <div class="msf-dashboard-panel-container msf-dashboard-panel-gridstack" *ngIf="!values.displayChart && !values.displayInfo && !values.displayForm && !values.displayPic && !values.displayTable && !values.displayMapbox && !values.displayDynTable && globals.readOnlyDashboard">
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
      <div class="msf-dashboard-panel-picture-label-container">
        <div class="msf-dashboard-panel-picture-label">
          This panel has no results generated
        </div>
      </div>
    </div>
  </div>
  <div class="msf-dashboard-panel-container msf-dashboard-panel-small msf-dashboard-panel-gridstack" *ngIf="!values.displayChart && !values.displayInfo && !values.displayForm && !values.displayPic && !values.displayTable && !values.displayMapbox && !values.displayDynTable && !globals.readOnlyDashboard && (isTinyPanel() && !dialogData)">
    <button mat-flat-button class="flat-button" (click)="configurePanel()">Configure Panel</button>
  </div>
  <div class="msf-dashboard-panel-container msf-dashboard-panel-config-gridstack msf-dashboard-panel-gridstack" *ngIf="!values.displayChart && !values.displayInfo && !values.displayForm && !values.displayPic && !values.displayTable && !values.displayMapbox && !values.displayDynTable && !globals.readOnlyDashboard && (!isTinyPanel() || dialogData)">
    <div class="msf-dashboard-panel-sub-container-column msf-dashboard-panel-header msf-dashboard-panel-config-name">
      {{values.chartName}}
    </div>
    <div class="msf-dashboard-panel-config-container">
      <div class="msf-dashboard-panel-steps">
        <div class="msf-dashboard-panel-steps-container">
          <div class="msf-dashboard-panel-step-selector" (click)="selectStep(1)">
            <div class="msf-dashboard-panel-step-circle" [ngClass]="{ 'msf-dashboard-panel-step-circle-selected' : selectedStep == 1 }"><mat-icon *ngIf="selectedStep == 1">edit</mat-icon></div>
            <span class="step-label">Panel Name</span>
          </div>
          <div class="msf-dashboard-panel-step-selector" (click)="selectStep(2)">
            <div class="msf-dashboard-panel-step-circle" [ngClass]="{ 'msf-dashboard-panel-step-circle-selected' : selectedStep == 2 }"><mat-icon *ngIf="selectedStep == 2">edit</mat-icon></div>
            <span class="step-label">Panel Type</span>
          </div>
          <div class="msf-dashboard-panel-step-selector" (click)="selectStep(3)">
            <div class="msf-dashboard-panel-step-circle" [ngClass]="{ 'msf-dashboard-panel-step-circle-selected' : selectedStep == 3 }"><mat-icon *ngIf="selectedStep == 3">edit</mat-icon></div>
            <span class="step-label">Select Source</span>
          </div>
          <div [ngClass]="values.currentOption ? 'msf-dashboard-panel-step-selector' : 'msf-dashboard-panel-step-selector-disabled'" (click)="selectStep(4)">
            <div class="msf-dashboard-panel-step-circle" [ngClass]="{ 'msf-dashboard-panel-step-circle-selected' : selectedStep == 4 }"><mat-icon *ngIf="selectedStep == 4">edit</mat-icon></div>
            <span class="step-label">Control Variables</span>
          </div>
          <div [ngClass]="values.currentOption && values.currentOptionCategories && controlVariablesSet ? 'msf-dashboard-panel-step-selector' : 'msf-dashboard-panel-step-selector-disabled'" (click)="selectStep(5)" *ngIf="!isDynTablePanel() && !isTablePanel()">
            <div class="msf-dashboard-panel-step-circle" [ngClass]="{ 'msf-dashboard-panel-step-circle-selected' : selectedStep == 5 }"><mat-icon *ngIf="selectedStep == 5">edit</mat-icon></div>
            <span class="step-label">Distribution Chart</span>
          </div>
          <div [ngClass]="values.currentOption && values.currentOptionCategories && controlVariablesSet ? 'msf-dashboard-panel-step-selector' : 'msf-dashboard-panel-step-selector-disabled'" (click)="selectStep(6)" *ngIf="isDynTablePanel() || isTablePanel()">
            <div class="msf-dashboard-panel-step-circle" [ngClass]="{ 'msf-dashboard-panel-step-circle-selected' : selectedStep == 6 }"><mat-icon *ngIf="selectedStep == 6">edit</mat-icon></div>
            <span class="step-label">Distribution Table</span>
          </div>
        </div>
        <div class="msf-dashboard-panel-step-button-container">
          <ng-container *ngIf="resultsGenerated()">
            <button mat-button class="msf-dashboard-panel-generate-button2" [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" [disabled]="!generateBtnEnabled" (click)="loadData()">
              Generate
            </button>
            <div class="msf-dashboard-panel-button-separator"></div>
            <button mat-button class="msf-dashboard-panel-cancel-button flat-button" (click)="goToResults()">
              Cancel
            </button>
          </ng-container>
          <ng-container *ngIf="!resultsGenerated()">
            <button mat-button class="msf-dashboard-panel-generate-button" [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" [disabled]="!generateBtnEnabled" (click)="loadData()">
              Generate
            </button>
          </ng-container>
        </div>
      </div>
      <div class="msf-dashboard-panel-step-content" *ngIf="selectedStep == 1">
        <div class="msf-dashboard-panel-step-item msf-dashboard-name-step">
          <div class="datalake-search-input">
            <mat-form-field class="msf-full-width datalake-search-formfield panel-formfield" appearance="outline">
              <mat-label>Panel Name</mat-label>
              <input matInput autocomplete="off" type="text" [(ngModel)]="values.chartName" />
            </mat-form-field>
          </div>
          <div class="datalake-search-input">
            <mat-form-field class="msf-full-width datalake-search-formfield panel-formfield" appearance="outline">
              <mat-label>Description</mat-label>
              <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="5" cdkAutosizeMaxRows="5" [(ngModel)]="values.chartDescription"></textarea>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-step-content" *ngIf="selectedStep == 2">
        <div class="msf-dashboard-panel-step-item">
          <div class="msf-dashboard-assistant-chart-type-label msf-dashboard-assistant-chart-mode">
            <span>Panel Type Selection</span>
            <mat-form-field class="msf-full-width panel-type-combobox">
              <mat-select [(ngModel)]="panelMode" (ngModelChange)="checkPanelTypeSelection()">
                <mat-option [value]="'basic'">Basic</mat-option>
                <mat-option [value]="'advanced'">Advanced</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-assistant-chart-picker-scroll">
            <div class="msf-dashboard-assistant-chart-picker">
              <ng-container *ngFor="let panelType of panelTypes">
                <div id="{{panelType.name}}-panel" *ngIf="checkPanelType(panelType)" (click)="selectPanelType(panelType)"
                     [ngClass]="{ 'msf-dashboard-assistant-chart-item' : selectedPanelType !== panelType, 'msf-dashboard-assistant-chart-item-selected' : selectedPanelType === panelType }">
                  <span class="chart-item-image">
                    <img src="../../assets/images/{{globals.theme}}-{{panelType.image}}" />
                  </span>
                  <div class="chart-item-label">
                    <div class="label-align">
                      {{panelType.name}}
                    </div>
                  </div>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-step-content" *ngIf="selectedStep == 3">
        <div class="msf-dashboard-panel-step-loading" *ngIf="stepLoading == 3"></div>
        <div class="msf-dashboard-panel-step-item" *ngIf="!stepLoading">
          <div class="select-data-body">
            <div class="select-data-menu-category" *ngFor="let menuCategory of menuCategories">
              <div class="menu-category-header">
                <span class="menu-category-title">{{menuCategory.label}}</span>
                <img class="menu-category-image" *ngIf="menuCategory.welcome.imageURL != null && menuCategory.welcome.imageURL != ''" src="{{globals.baseUrl}}/categoryImage/{{globals.theme}}-{{menuCategory.welcome.imageURL}}" />
              </div>
              <div class="menu-category-description">
                <ng-container *ngIf="menuCategory.welcome.shortDescription">
                  {{menuCategory.welcome.shortDescription}}
                </ng-container>
              </div>
              <div class="menu-category-body">
                <mat-form-field class="menu-item-search-input">
                  <input matInput autocomplete="off" [(ngModel)]="menuCategory.searchLabel" (ngModelChange)="filterMenuOptions(menuCategory)">
                  <mat-icon class="search-icon" aria-label="search">search</mat-icon>
                </mat-form-field>
                <div class="menu-items">
                  <ng-container *ngIf="menuCategory.tree">
                    <mat-tree [dataSource]="menuCategory.tree" [treeControl]="menuCategory.treeControl">
                      <mat-tree-node [ngClass]="{
                                     'msf-show' : node.show,
                                     'msf-show' : node.show == null,
                                     'msf-hide': node.show == false }"
                                     *matTreeNodeDef="let node" matTreeNodePadding>
                        <mat-radio-button class="cancels-checkbox select-data-from-radio" [checked]="selectedItem == node" (click)="selectItem(node)">
                          {{node.label}}
                        </mat-radio-button>
                      </mat-tree-node>
                      <mat-tree-node [ngClass]="{
                                     'msf-show' : node.show,
                                     'msf-show' : node.show == null,
                                     'msf-hide': node.show == false }"
                                     *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
                        <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.label">
                          <mat-icon class="mat-icon-rtl-mirror">
                            {{menuCategory.treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                          </mat-icon>
                        </button>
                        {{node.label}}
                      </mat-tree-node>
                    </mat-tree>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div [ngClass]="{ 'msf-dashboard-panel-container-invisible': selectedStep != 4, 'msf-dashboard-panel-step-content': selectedStep == 4 }">
        <div [ngClass]="{ 'msf-dashboard-panel-container-invisible': stepLoading != 4, 'msf-dashboard-panel-step-loading': stepLoading == 4 }"></div>
        <div [ngClass]="{ 'msf-dashboard-panel-container-invisible': stepLoading == 4, 'msf-dashboard-panel-step-item': stepLoading != 4 }">
          <div [ngStyle]="{ 'display': checkTablePreviewVisibility() }" [style.height.%]="100">
            <div class="msf-dashboard-assistant-content">
              <div class="msf-dashboard-assistant-tab-group">
                <div class="no-control-variables-container" *ngIf="!values.currentOptionCategories && stepLoading != 4 && tablePreview">
                  No Control Variables For This Option
                </div>
                <ng-container *ngIf="values.currentOptionCategories && stepLoading != 4 && tablePreview">
                  <mat-tab-group #configTabs>
                    <mat-tab *ngFor="let controlVariable of values.currentOptionCategories">
                      <ng-template mat-tab-label>
                        <mat-icon *ngIf="controlVariable.icon && isMatIcon(controlVariable.icon)"
                                  class="msf-dashboard-control-panel-tab-icon">{{controlVariable.icon}}</mat-icon>
                        <img *ngIf="controlVariable.icon && !isMatIcon(controlVariable.icon)"
                             src="{{getImageIcon(controlVariable)}}" class="msf-dashboard-control-panel-tab-icon">
                        {{controlVariable.label}}
                      </ng-template>
                      <div class="msf-dashboard-assistant-tab-container">
                        <div class="msf-dashboard-assistant-tab-info">
                          <div class="msf-dashboard-assistant-edit-button">
                            <button mat-button (click)="goToEditor()">
                              <mat-icon>create</mat-icon>
                              Edit
                            </button>
                          </div>
                          <div class="msf-dashboard-assistant-argument msf-dashboard-assistant-argument-scroll">
                            <div class="msf-dashboard-assistant-argument-container"
                                 *ngFor="let argument of controlVariable.arguments">
                              <div class="msf-block" *ngIf="argument.name1">
                                <div class="msf-inline">
                                  {{ getArgumentLabel1(argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="!valueIsEmpty(argument.value1) && argument">
                                  {{utils.getValueFormatView(argument.type, argument.value1,argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="valueIsEmpty(argument.value1) && argument">
                                  all
                                </div>
                              </div>
                              <div class="msf-block" *ngIf="argument.name2">
                                <div class="msf-inline">
                                  {{ getArgumentLabel2(argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="!valueIsEmpty(argument.value2) && argument">
                                  {{utils.getValueFormatView(argument.type, argument.value2,argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="valueIsEmpty(argument.value2) && argument">
                                  all
                                </div>
                              </div>
                              <div class="msf-block" *ngIf="argument.name3">
                                <div class="msf-inline">
                                  {{ getArgumentLabel3(argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="!valueIsEmpty(argument.value3) && argument">
                                  {{utils.getValueFormatView(argument.type, argument.value3,argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="valueIsEmpty(argument.value3) && argument">
                                  all
                                </div>
                              </div>
                              <div class="msf-block" *ngIf="argument.name4">
                                <div class="msf-inline">
                                  {{ getArgumentLabel4(argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="!valueIsEmpty(argument.value4) && argument">
                                  {{utils.getValueFormatView(argument.type, argument.value4,argument)}}
                                </div>
                                <div class="msf-inline msf-dashboard-assistant-argument-value"
                                     *ngIf="valueIsEmpty(argument.value4) && argument">
                                  all
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </mat-tab>
                  </mat-tab-group>
                </ng-container>
              </div>
              <div class="msf-dashboard-assistant-table msf-dashboard-child-panel-table mat-elevation-z8">
                <app-msf-table #msfConfigTableRef [isLoading]="configTableLoading" (finishLoading)="finishLoadingConfigTable($event)" [categoryArguments]="values.currentOptionCategories" [currentOption]="values.currentOption" [isPanel]="false"></app-msf-table>
              </div>
            </div>
          </div>
          <div class="msf-dashboard-assistant-tab-group msf-dashboard-assistant-edit-tab-group msf-dashboard-panel-step-variables-edit" *ngIf="!tablePreview">
            <mat-tab-group #editTabs>
              <mat-tab *ngFor="let controlVariable of values.currentOptionCategories">
                <ng-template mat-tab-label>
                  <mat-icon *ngIf="controlVariable.icon && isMatIcon(controlVariable.icon)" class="msf-dashboard-control-panel-tab-icon">{{controlVariable.icon}}</mat-icon>
                  <img *ngIf="controlVariable.icon && !isMatIcon(controlVariable.icon)" src="{{getImageIcon(controlVariable)}}" class="msf-dashboard-control-panel-tab-icon">
                  {{controlVariable.label}}
                </ng-template>
                <div class="msf-dashboard-assistant-tab-group msf-dashboard-assistant-edit-tab-group msf-dashboard-panel-step-variables-buttons" [ngStyle]="{ 'display': checkEditVisibility() }">
                  <div class="edit-label"><mat-icon>edit</mat-icon><div class="edit-text">Edit Control Variable</div></div>
                  <button *ngIf="!tablePreview" class="msf-dashboard-assistant-step-button msf-dashboard-assistant-next-button flat-button" mat-button (click)="refreshTable()">
                    Save
                  </button>
                  <button *ngIf="!tablePreview && configuredControlVariables && !selectDataPreview" class="msf-dashboard-assistant-step-button msf-dashboard-assistant-cancel-button flat-button" mat-button (click)="cancelEdit()">
                    Cancel
                  </button>
                </div>
                <div class="msf-dashboard-assistant-tab-container msf-dashboard-assistant-edit-tab-container">
                  <div class="msf-dashboard-control-panel-variable-tab-container msf-dashboard-assistant-edit-tab-container msf-control-variables-overlay">
                    <div class="msf-dashboard-control-panel-variable-arguments">
                      <div *ngFor="let argument of controlVariable.arguments" class="msf-dashboard-control-panel-variable-argument">
                        <ng-container *ngIf="!isSingleCheckbox(argument) && !isTaxiTimesCheckbox(argument)">
                          <div class="msf-component-outer-container">
                            <div *ngIf="!isDateRange(argument)" class="msf-component-argument-container">
                              <app-msf-argument [currentArgument]="argument" [currentGlobalOptionId]="values.currentOption.id" [updateURLResults]="updateURLResults" (setLoading)="setCtrlVariableLoading($event)" (startURLUpdate)="startURLUpdate()"></app-msf-argument>
                              <!-- Special treatment for single checkbox arguments -->
                              <ng-container *ngIf="argument.checkboxes">
                                <ng-container *ngFor="let checkbox of argument.checkboxes">
                                  <div class="msf-single-checkbox-outer-container">
                                    <div class="msf-component-argument-container">
                                      <app-msf-single-checkbox [argument]="checkbox"></app-msf-single-checkbox>
                                    </div>
                                  </div>
                                </ng-container>
                              </ng-container>
                            </div>
                            <!-- Another special treatment for the date range argument -->
                            <ng-container *ngIf="isDateRange(argument)">
                              <app-msf-date-range class="msf-component-date-range-container" [argument]="argument"></app-msf-date-range>
                            </ng-container>
                          </div>
                        </ng-container>
                      </div>
                      <!-- The taxi times single checkbox will be always the last one of the arguments -->
                      <ng-container *ngIf="controlVariable.taxiTimesCheckbox">
                        <div class="msf-dashboard-control-panel-variable-argument">
                          <div class="msf-component-outer-container">
                            <div class="msf-component-taxi-times-single-checkbox">
                              <app-msf-taxi-times-checkbox [argument]="controlVariable.taxiTimesCheckbox"></app-msf-taxi-times-checkbox>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-step-content" *ngIf="selectedStep == 5">
        <div class="msf-dashboard-panel-step-loading" *ngIf="stepLoading == 5"></div>
        <div class="msf-dashboard-panel-step-item" *ngIf="!stepLoading">

          <div class="msf-dashboard-panel-chart-config-container" [ngClass]="{ 'msf-dashboard-panel-chart-config-container-small': isSmallPanel() }">
            <div class="msf-dashboard-assistant-chart-config-buttons">
              <div *ngIf="hasAnalysisByValue()" class="msf-dashboard-assistant-chart-config-button"
                   [ngClass]="{ 'msf-dashboard-assistant-chart-config-analysis-button': !analysisSelected, 'msf-dashboard-assistant-chart-config-analysis-button-selected': (analysisSelected || (!analysisSelecetd && selectingAnalysis)) }"
                   (click)="selectAnalysis()">
                Analysis by
              </div>
              <ng-container *ngIf="panelMode === 'basic'">
                <div class="msf-dashboard-assistant-chart-config-button"
                     [ngClass]="{ 'msf-dashboard-assistant-chart-config-axis-button': !xAxisSelected, 'msf-dashboard-assistant-chart-config-axis-button-selected': (xAxisSelected || (!xAxisSelected && selectingXAxis)) }"
                     (click)="selectXAxis()" *ngIf="haveXAxis()">
                  X - Axis
                </div>
                <div class="msf-dashboard-assistant-chart-config-button"
                     [ngClass]="{ 'msf-dashboard-assistant-chart-config-values-button': !valueSelected, 'msf-dashboard-assistant-chart-config-values-button-selected': (valueSelected || (!valueSelected && selectingValue)) }"
                     (click)="selectValue()">
                  Values
                </div>
                <div class="assistant-function-combobox">
                  <mat-form-field>
                    <mat-select placeholder="Function" [(ngModel)]="values.function" (ngModelChange)="checkPanelConfiguration()">
                      <mat-option *ngFor="let fun of functions" [value]="fun">
                        {{fun.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </ng-container>
              <ng-container *ngIf="panelMode === 'advanced'">
                <div class="msf-dashboard-assistant-chart-config-button"
                     [ngClass]="{ 'msf-dashboard-assistant-chart-config-aggregation-button': !aggregationValueSelected, 'msf-dashboard-assistant-chart-config-aggregation-button-selected': (aggregationValueSelected || (!aggregationValueSelected && selectingAggregationValue)) }"
                     (click)="selectAggregationValue()">
                  Aggregation Value
                </div>
                <div *ngIf="!hasAnalysisByValue()" class="msf-dashboard-assistant-chart-config-space"></div>
              </ng-container>
              <div class="msf-dashboard-assistant-advanced-chart-value" *ngIf="panelMode === 'advanced'">
                <div class="assistant-function-combobox" *ngIf="intervalType === 'ncile'">
                  <mat-form-field>
                    <mat-select placeholder="Ncile" [(ngModel)]="ncile">
                      <mat-option *ngFor="let value of nciles" [value]="value">
                        {{value}}%
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="assistant-function-combobox" *ngIf="intervalType === 'value'">
                  <mat-form-field>
                    <input matInput placeholder="Value" autocomplete="off" [(ngModel)]="intValue">
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="msf-dashboard-assistant-interval-mode" *ngIf="panelMode === 'advanced'">
              <span class="msf-dashboard-assistant-chart-type-label">Interval Type</span>
              <mat-radio-group [(ngModel)]="values.intervalType">
                <mat-radio-button class="cancels-checkbox interval-checkbox" [value]="'ncile'">
                  By Ncile
                </mat-radio-button>
                <mat-radio-button class="cancels-checkbox interval-checkbox" [value]="'value'">
                  By Value
                </mat-radio-button>
              </mat-radio-group>
            </div>
            <div class="msf-dashboard-assistant-min-value-at-zero" *ngIf="panelMode !== 'advanced' && isLineOrBarChart()">
              <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="values.ordered">Ordered</mat-checkbox>
              <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="values.startAtZero">Min Value At 0</mat-checkbox>
            </div>
          </div>
          <div class="msf-dashboard-select-distribution-chart-table-container msf-dashboard-child-panel-table mat-elevation-z8" [ngClass]="{ 'msf-dashboard-select-distribution-chart-table-container-small': isSmallPanel() }">
            <div class="results-container msf-dashboard-select-distribution-chart-table">
              <table mat-table [dataSource]="msfConfigTableRef.dataSource" class="mat-elevation-z8 datasource results">
                <ng-container [matColumnDef]="column.columnName" *ngFor="let column of msfConfigTableRef.metadata; let i = index">
                  <th class="msf-show-table" [ngClass]="{
                    'distribution-chart-column-analysis-header-hover' : (lastColumn === column && selectingAnalysis),
                    'distribution-chart-column-analysis-header-selected' : analysisSelected === column,
                'distribution-chart-column-axis-header-hover' : (lastColumn === column && selectingXAxis),
                'distribution-chart-column-axis-header-selected' :  xAxisSelected === column,
                'distribution-chart-column-values-header-hover' : (lastColumn === column && selectingValue),
                'distribution-chart-column-values-header-selected' : valueSelected === column,
                'distribution-chart-column-aggregation-header-hover' : (lastColumn === column && selectingAggregationValue),
                'distribution-chart-column-aggregation-header-selected' : aggregationValueSelected === column
                }" mat-header-cell *matHeaderCellDef (mouseover)="hoverTableColumn(column)" (click)="setChartValue()">
                    {{column.columnLabel}}
                  </th>
                  <td class="msf-show-table" [ngClass]="{
                'distribution-chart-column-analysis-row-hover' : (lastColumn === column && selectingAnalysis),
                'distribution-chart-column-analysis-row-selected' : analysisSelected === column,
                'distribution-chart-column-axis-row-hover' : (lastColumn === column && selectingXAxis),
                'distribution-chart-column-axis-row-selected' : xAxisSelected === column,
                'distribution-chart-column-values-row-hover' : (lastColumn === column && selectingValue),
                'distribution-chart-column-values-row-selected' : valueSelected === column,
                'distribution-chart-column-aggregation-row-hover' : (lastColumn === column && selectingAggregationValue),
                'distribution-chart-column-aggregation-row-selected' : aggregationValueSelected === column
                }" mat-cell *matCellDef="let element; let rowNumber = dataIndex" (mouseover)="hoverTableColumn(column)"
                      (click)="setChartValue()">
                    <span *ngIf="!isArray(element['Flight'])">
                      <ng-container *ngIf="element[column.columnName] != null && element[column.columnName] != ''">
                        <ng-container *ngIf="column.outputFormat != null && column.outputFormat != ''">
                          <span *ngIf="column.columnType=='date' || column.columnType=='time'">{{element[column.columnName] | date: column.outputFormat}}</span>
                          <span *ngIf="column.columnType=='string'">{{element[column.columnName]}}</span>
                          <span *ngIf="column.columnType=='number'">
                            <span *ngIf="column.prefix">{{column.prefix}}</span>{{element[column.columnName] | number:column.outputFormat:'en'}}<span *ngIf="column.suffix">{{column.suffix}}</span>
                          </span>
                        </ng-container>
                        <ng-container *ngIf="column.outputFormat == null || column.outputFormat == ''">
                          <span *ngIf="column.columnType!='number'">{{element[column.columnName]}}</span>
                          <span *ngIf="column.columnType=='number'">
                            <span *ngIf="column.prefix">{{column.prefix}}</span>{{element[column.columnName] | number:'.0-2':'en'}}<span *ngIf="column.suffix">{{column.suffix}}</span>
                          </span>
                        </ng-container>
                      </ng-container>
                    </span>
                    <span class="msf-table-sub-cell" *ngIf="isArray(element['Flight'])">
                      <span class="{{getDecoration(element['Flight'],j)}}"
                            *ngFor="let subElement of element['Flight']; let j = index">
                        <ng-container *ngIf="subElement[column.columnName].parsedValue != null && subElement[column.columnName].parsedValue != ''">
                          <ng-container *ngIf="column.outputFormat != null && column.outputFormat != ''">
                            <span *ngIf="column.columnType=='date' || column.columnType=='time'">{{subElement[column.columnName].parsedValue | date: column.outputFormat}}</span>
                            <span *ngIf="column.columnType=='string'">{{subElement[column.columnName].parsedValue}}</span>
                            <span *ngIf="column.columnType=='number'">
                              <span *ngIf="column.prefix">{{column.prefix}}</span>{{subElement[column.columnName].parsedValue | number:column.outputFormat:'en'}}<span *ngIf="column.suffix">{{column.suffix}}</span>
                            </span>
                          </ng-container>
                          <ng-container *ngIf="column.outputFormat == null || column.outputFormat == ''">
                            <span *ngIf="column.columnType!='number'">{{subElement[column.columnName].parsedValue}}</span>
                            <span *ngIf="column.columnType=='number'">
                              <span *ngIf="column.prefix">{{column.prefix}}</span>{{subElement[column.columnName].parsedValue | number:'.0-2':'en'}}<span *ngIf="column.suffix">{{column.suffix}}</span>
                            </span>
                          </ng-container>
                        </ng-container>
                      </span>
                    </span>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="msfConfigTableRef.displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: msfConfigTableRef.displayedColumns;" [style.height.px]="40"></tr>
              </table>
            </div>
          </div>

        </div>
      </div>
      <div class="msf-dashboard-panel-step-content" *ngIf="selectedStep == 6">
        <div class="msf-dashboard-panel-step-item msf-dashboard-panel-dyn-table-item" *ngIf="isDynTablePanel()">
          <div class="dynamic-table-config-values-container">
            <div class="dynamic-table-config-value">
              X-Axis:
              <ng-container *ngIf="dynTableHasXAxis()">
                <ng-container *ngFor="let variable of values.dynTableVariables">
                  <span class="value-label" *ngIf="variable.direction === 'horizontal'">{{variable.name}}</span>
                </ng-container>
              </ng-container>
              <span class="value-label" *ngIf="!dynTableHasXAxis()">
                None
              </span>
            </div>
            <div class="dynamic-table-config-value">
              Y-Axis:
              <ng-container *ngIf="dynTableHasYAxis()">
                <ng-container *ngFor="let variable of values.dynTableVariables">
                  <span class="value-label" *ngIf="variable.direction === 'vertical'">{{variable.name}}</span>
                </ng-container>
              </ng-container>
              <span class="value-label" *ngIf="!dynTableHasYAxis()">
                None
              </span>
            </div>
            <div class="dynamic-table-config-value">
              Values:
              <ng-container *ngIf="dynTableHasValues()">
                <ng-container *ngFor="let variable of values.dynTableValues">
                  <span class="value-label">{{variable.name}}</span>
                </ng-container>
              </ng-container>
              <span class="value-label" *ngIf="!dynTableHasValues()">
                None
              </span>
            </div>
            <button mat-button class="dynamic-table-config-button flat-button" (click)="configureDynamicTable()">
              Configure Dynamic Table
            </button>
          </div>
        </div>
        <div class="msf-dashboard-panel-step-item msf-dashboard-panel-dyn-table-item" *ngIf="isTablePanel()">
          <div class="msf-dashboard-addmenu-icon-item table-config-label">
            <mat-icon class="msf-dashboard-chart-icon" aria-label="Filter List">filter_list</mat-icon>
            <span class="msf-dashboard-addmenu-item-text">Column Selector</span>
          </div>
          <div class="msf-dashboard-panel-sub-container-column msf-dashboard-panel-sub-container-form-column table-column-list" id="msf-dashboard-panel-form-container-column" [ngStyle]="{'overflow-y': ((values.height.value < 6 && values.tableVariables.length > 2) || (values.height.value >= 6 && values.tableVariables.length > 3)) ? 'scroll' : 'hidden'}">
            <div class="msf-dashboard-panel-sub-container-row" id="msf-dashboard-panel-table-container-row" *ngFor="let tableVariable of values.tableVariables">
              <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-table-op-container">
                <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="tableVariable.checked">
                  {{tableVariable.name}}
                </mat-checkbox>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--
  <div class="msf-dashboard-panel-container msf-dashboard-panel-gridstack" *ngIf="!values.displayChart && !values.displayInfo && !values.displayForm && !values.displayPic && !values.displayTable && !values.displayMapbox && !values.displayDynTable && !globals.readOnlyDashboard && ((values.width >= 3 && values.height >= 7) || dialogData)">
    <div class="msf-dashboard-panel-sub-container-column msf-dashboard-panel-header">
      <div class="msf-dashboard-panel-sub-container-row msf-dashboard-panel-discover-button">
        <button class="flat-button discover-button" mat-button (click)="openDiscoveryDialog()">
          <img class="search-icon" src="../../assets/images/search-icon.png"/>
          <span *ngIf="displayLabel" class="search-label">Select Source</span>
        </button>
      </div>
      <div class="msf-dashboard-panel-sub-container-row msf-dashboard-panel-data-select">
        <mat-form-field *ngIf="values.currentChartType.name !='Link Image'" [formGroup]="panelForm" class="msf-full-width">
          <mat-select formControlName="dataFormCtrl" placeholder="Select Data From" [(value)]="values.currentOption" (selectionChange)="loadChartFilterValues($event.value)">
            <ngx-mat-select-search [formControl]="dataFormFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
            <mat-option *ngFor="let option of filteredOptions | async | panelOptionFilter: values.currentChartType" [value]="option">
              {{option.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        input url Img
        <mat-form-field  *ngIf="values.currentChartType.name==='Link Image'" class="msf-full-width">
            <input matInput autocomplete="off" type="text" placeholder="Type Image Url" [(ngModel)]="values.urlImg"/>
          </mat-form-field>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-panel-sub-container-row">
        <mat-form-field class="msf-full-width">
          <input matInput autocomplete="off" type="text" placeholder="Panel Name" [(ngModel)]="values.chartName"/>
        </mat-form-field>
      </div>
      <div class="msf-dashboard-panel-sub-container-row msf-dashboard-panel-sub-container-space msf-dashboard-panel-chart-type">
        <mat-form-field class="msf-full-width">
          <mat-select placeholder="Panel Type" [(ngModel)]="values.currentChartType" (selectionChange)="checkChartType()">
            <mat-option *ngFor="let panelType of chartTypes | panelTypeFilter:globals.currentApplication.name" [value]="panelType">
              {{panelType.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="msf-dashboard-panel-sub-container-row msf-dashboard-panel-sub-container-checkbox msf-dashboard-panel-interval-time">
        <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="values.updateIntervalSwitch"></mat-checkbox>
        <mat-form-field class="msf-full-width">
          <input [disabled]="!values.updateIntervalSwitch" matInput autocomplete="off" type="number" placeholder="Update Interval (In Minutes)" [(ngModel)]="values.updateTimeLeft"/>
        </mat-form-field>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-row">
      <mat-form-field class="msf-full-width">
        <textarea matInput 
        cdkTextareaAutosize
        #autosize="cdkTextareaAutosize"
        cdkAutosizeMinRows="1"
        cdkAutosizeMaxRows="2"
        placeholder="Description" [(ngModel)]="values.chartDescription"></textarea>
    </mat-form-field>
    </div>
    <ng-container *ngIf="!isInformationPanel() && !isSimpleFormPanel() && !isPicturePanel() && !isTablePanel() && !isMapPanel() && !isHeatMapPanel() && !isMapboxPanel() && !isDynTablePanel() && !isAdvChartPanel()">
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-addmenu-icon-item msf-chart-config-label-container">
          <mat-icon class="msf-dashboard-chart-icon" aria-label="Filter List">filter_list</mat-icon>
          <span class="msf-dashboard-addmenu-item-text msf-dashboard-chart-configuration-label">Chart Configuration</span>
          <div *ngIf="isLineOrBarChart()" class="msf-dashboard-panel-sub-container-row msf-dashboard-panel-sub-container-checkbox msf-dashboard-panel-chart-checkboxes">
            <mat-checkbox class="cancels-checkbox" [(ngModel)]="values.ordered">Ordered</mat-checkbox>
            <mat-checkbox class="cancels-checkbox" [(ngModel)]="values.startAtZero">Min Value At 0</mat-checkbox>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">bar_chart</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <div class="msf-dashboard-chart-op-container-row">
                <div class="msf-dashboard-field-valuectrl">
                  <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                    <mat-select formControlName="variableCtrl" placeholder="Analysis by" [(value)]="values.variable" (selectionChange)="checkPanelConfiguration()">
                      <ngx-mat-select-search [formControl]="variableFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                      <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                        {{variable.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="msf-dashboard-field-function">
                  <mat-form-field>
                    <input matInput autocomplete="off" placeholder="Vertical Axis Name" [disabled]="vertAxisDisabled" [(ngModel)]="values.vertAxisName">
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">multiline_chart</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <div class="msf-dashboard-chart-op-container-row">
                <div class="msf-dashboard-field-valuectrl">
                  <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                    <mat-select formControlName="xaxisCtrl" placeholder="x - Axis" [(value)]="values.xaxis" (selectionChange)="checkPanelConfiguration()">
                      <ngx-mat-select-search [formControl]="xaxisFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                      <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                        {{variable.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="msf-dashboard-field-function">
                  <mat-form-field>
                    <input matInput autocomplete="off" placeholder="Horizontal Axis Name" [disabled]="horizAxisDisabled" [(ngModel)]="values.horizAxisName">
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">show_chart</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <div class="msf-dashboard-chart-op-container-row">
                <div class="msf-dashboard-field-valuectrl">
                  <mat-form-field [formGroup]="panelForm">
                    <mat-select *ngIf="!isSimpleChart()" formControlName="valueCtrl" placeholder="Values" [(value)]="values.valueColumn" (selectionChange)="checkPanelConfiguration()">
                      <ngx-mat-select-search [formControl]="valueFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                      <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                        {{variable.name}}
                      </mat-option>
                    </mat-select>
                    <mat-select *ngIf="isSimpleChart()" formControlName="valueListCtrl" placeholder="Values" [(value)]="values.valueList" (selectionChange)="checkPanelConfiguration()" multiple>
                      <ngx-mat-select-search [formControl]="valueFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                      <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                        {{variable.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="msf-dashboard-field-function">
                  <mat-form-field>
                    <mat-select placeholder="Function" [(ngModel)]="values.function" (ngModelChange)="checkPanelConfiguration()">
                      <mat-option *ngFor="let fun of functions" [value]="fun">
                        {{fun.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Chart">
                <mat-icon aria-label="Go To Chart">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="goToAdditionalSettings()" color="primary" matTooltip="Additional Settings">
                <img src="../../assets/images/additional-options.png"/>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="values.currentOption == null || !values.currentOption.drillDownOptions.length" mat-mini-fab (click)="goToDrillDownSettings()" color="primary" matTooltip="Drill Down">
                <mat-icon aria-label="Drill Down">subtitles</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="values.currentOption == null" mat-mini-fab (click)="openAssistant()" color="primary" matTooltip="Wizard">
                <img src="../../assets/images/wizard-icon.png"/>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isInformationPanel()">
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-panel-sub-container-row">
          <div class="msf-dashboard-chart-options-container msf-dashboard-info-chart-options">
            <div class="msf-dashboard-chart-selector">
              <div class="msf-dashboard-chart-analysis-title">
                <mat-icon class="msf-dashboard-chart-icon">table_chart</mat-icon>
              </div>
              <div class="msf-dashboard-chart-op-container">
                <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                  <mat-select formControlName="infoNumVarCtrl" placeholder="Number of variables" [(value)]="values.infoNumVariables" (selectionChange)="checkNumVariables()">
                    <mat-option *ngFor="let number of [1,2,3]" [value]="number">
                      {{number}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="msf-dashboard-chart-selector">
              <div class="msf-dashboard-chart-analysis-title">
                <mat-icon class="msf-dashboard-chart-icon">filter_1</mat-icon>
              </div>
              <div class="msf-dashboard-chart-op-container">
                <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                  <mat-select formControlName="infoVar1Ctrl" placeholder="Variable #1" [(value)]="values.infoVar1">
                    <ngx-mat-select-search [formControl]="infoVar1FilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                    <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                      {{variable.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button [disabled]="!values.infoVar1" mat-icon-button (click)="goToFunctions(0)" [ngClass]="values.infoVar1 ? 'func-button' : 'func-button-disabled'">
                <mat-icon aria-label="Functions for Variable #1">more_horiz</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-chart-selector">
              <div class="msf-dashboard-chart-analysis-title">
                <mat-icon class="msf-dashboard-chart-icon">filter_2</mat-icon>
              </div>
              <div class="msf-dashboard-chart-op-container">
                <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                  <mat-select formControlName="infoVar2Ctrl" placeholder="Variable #2" [(value)]="values.infoVar2">
                    <ngx-mat-select-search [formControl]="infoVar2FilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                    <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                      {{variable.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button [disabled]="!values.infoVar2" mat-icon-button (click)="goToFunctions(1)" [ngClass]="values.infoVar2 ? 'func-button' : 'func-button-disabled'">
                <mat-icon aria-label="Functions for Variable #2">more_horiz</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-chart-selector">
              <div class="msf-dashboard-chart-analysis-title">
                <mat-icon class="msf-dashboard-chart-icon">filter_3</mat-icon>
              </div>
              <div class="msf-dashboard-chart-op-container">
                <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                  <mat-select formControlName="infoVar3Ctrl" placeholder="Variable #3" [(value)]="values.infoVar3">
                    <ngx-mat-select-search [formControl]="infoVar3FilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                    <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                      {{variable.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <button [disabled]="!values.infoVar3" mat-icon-button (click)="goToFunctions(2)" [ngClass]="values.infoVar3 ? 'func-button' : 'func-button-disabled'">
                <mat-icon aria-label="Functions for Variable #3">more_horiz</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Information">
                <mat-icon aria-label="Go To Information">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isSimpleFormPanel()">
      <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-form-sub-container">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-chart-selector msf-simple-form-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">list</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                <mat-select formControlName="columnCtrl" placeholder="Select Column">
                  <ngx-mat-select-search [formControl]="columnFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                  <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                    {{variable.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                <mat-select formControlName="fontSizeCtrl" placeholder="Title Font Size">
                  <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                    {{fontSize.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                <mat-select formControlName="valueFontSizeCtrl" placeholder="Value Font Size">
                  <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                    {{fontSize.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                <mat-select formControlName="valueOrientationCtrl" placeholder="Value Orientation">
                  <mat-option *ngFor="let orientation of orientations" [value]="orientation">
                    {{orientation.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                <mat-select formControlName="functionCtrl" placeholder="Function">
                  <mat-option *ngFor="let fun of functions" [value]="fun">
                    {{fun.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="msf-dashboard-chart-add-button" id="msf-dashboard-form-button">
              <button [disabled]="!isFormColumnValid()" mat-icon-button (click)="addColumnIntoForm()" [ngClass]="isFormColumnValid() ? 'func-button' : 'func-button-disabled'">
                <mat-icon class="msf-dashboard-chart-icon msf-dashboard-form-icon-button" aria-label="Add Column">add</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div #formScrollContainer class="msf-dashboard-panel-sub-container-column msf-dashboard-panel-sub-container-form-column" id="msf-dashboard-panel-form-container-column" *ngIf="values.formVariables.length" [ngStyle]="{'overflow-y': ((values.height.value < 6 && values.formVariables.length > 2) || (values.height.value >= 6 && values.formVariables.length > 3)) ? 'scroll' : 'hidden'}" cdkDropList [cdkDropListData]="values.formVariables" cdkDropListOrientation="vertical" (cdkDropListDropped)="swapFormVariablePositions($event)">
        <div class="{{globals.theme}} msf-dashboard-panel-sub-container-row" id="msf-dashboard-panel-form-container-row" *ngFor="let formVariable of values.formVariables; let column = index" cdkDragLockAxis="y" vsDragScroll [vsDragScrollContainer]="formScrollContainer" cdkDrag>
          <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select [(value)]="formVariable.column" placeholder="Select Column">
                <ngx-mat-select-search [formControl]="columnFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                  {{variable.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select [(value)]="formVariable.fontSize" placeholder="Title Font Size">
                <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                  {{fontSize.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select [(value)]="formVariable.valueFontSize" placeholder="Value Font Size">
                <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                  {{fontSize.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select [(value)]="formVariable.valueOrientation" placeholder="Value Orientation">
                <mat-option *ngFor="let orientation of orientations" [value]="orientation">
                  {{orientation.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select [(value)]="formVariable.function" placeholder="Function">
                <mat-option *ngFor="let fun of functions" [value]="fun">
                  {{fun.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-add-button" id="msf-dashboard-form-button">
            <div class="mat-icon-drag-button">
              <div class="msf-dashboard-chart-move-icon" cdkDragHandle></div>
            </div>
          </div>
          <div class="msf-dashboard-chart-add-button" id="msf-dashboard-form-button">
            <button mat-icon-button (click)="deleteColumnFromForm(column)">
              <mat-icon class="msf-dashboard-chart-icon" aria-label="Delete Column">delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-form-container-column-empty" *ngIf="!values.formVariables.length">
        <div class="msf-no-results">
          The form doesn't contain any columns
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Form">
                <mat-icon aria-label="Go To Form">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="goToAdditionalSettings()" color="primary" matTooltip="Additional Settings">
                <img src="../../assets/images/additional-options.png"/>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isPicturePanel()">
      <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
        <div class="msf-dashboard-panel-picture-label-container">
          <div class="msf-dashboard-panel-picture-label">
            Set URL Image before generating the image!
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Picture">
                <mat-icon aria-label="Go To Picture">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isMapPanel()">
      <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
        <div class="msf-dashboard-panel-picture-label-container">
          <div class="msf-dashboard-panel-picture-label">
            Set the control variables before generating the map!
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Map">
                <mat-icon aria-label="Go To Map">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isHeatMapPanel()">
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-addmenu-icon-item">
          <mat-icon class="msf-dashboard-chart-icon" aria-label="Heat Map Variable">filter_list</mat-icon>
          <span class="msf-dashboard-addmenu-item-text">Heat Map Configuration</span>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">place</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field class="msf-full-width">
                <mat-select placeholder="Geography Data" [(ngModel)]="values.geodata">
                  <mat-option *ngFor="let geodata of geodatas" [value]="geodata">
                    {{geodata.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">vpn_key</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                <mat-select formControlName="geodataKeyCtrl" placeholder="Geography Data Key" [(value)]="values.valueColumn" (selectionChange)="checkPanelConfiguration()">
                  <ngx-mat-select-search [formControl]="valueFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                  <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                    {{variable.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">data_usage</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                <mat-select formControlName="geodataValueCtrl" placeholder="Value To Display" [(value)]="values.variable" (selectionChange)="checkPanelConfiguration()">
                  <ngx-mat-select-search [formControl]="variableFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                  <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                    {{variable.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Map">
                <mat-icon aria-label="Go To Map">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="goToAdditionalSettings()" color="primary" matTooltip="Additional Settings">
                <img src="../../assets/images/additional-options.png"/>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isMapboxPanel()">
      <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">style</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field class="msf-full-width">
                <mat-select placeholder="Style" [(ngModel)]="values.style">
                  <mat-option *ngFor="let style of msfMapRef.mapTypes" [value]="style">
                    {{style.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Map">
                <mat-icon aria-label="Go To Map">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isTablePanel()">
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-addmenu-icon-item">
          <mat-icon class="msf-dashboard-chart-icon" aria-label="Filter List">filter_list</mat-icon>
          <span class="msf-dashboard-addmenu-item-text">Column Selector</span>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column msf-dashboard-panel-sub-container-form-column" id="msf-dashboard-panel-form-container-column" [ngStyle]="{'overflow-y': ((values.height.value < 6 && values.tableVariables.length > 2) || (values.height.value >= 6 && values.tableVariables.length > 3)) ? 'scroll' : 'hidden'}">
        <div class="msf-dashboard-panel-sub-container-row" id="msf-dashboard-panel-table-container-row" *ngFor="let tableVariable of values.tableVariables">
          <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-table-op-container">
            <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="tableVariable.checked">
              {{tableVariable.name}}
            </mat-checkbox>
          </div>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Table">
                <mat-icon aria-label="Go To Table">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="goToAdditionalSettings()" color="primary" matTooltip="Additional Settings">
                <img src="../../assets/images/additional-options.png"/>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isDynTablePanel()">
      <div class="msf-dashboard-panel-sub-container-column msf-dashboard-panel-dynamic-table">
        <button mat-button [disabled]="!this.values.currentOptionCategories" class="dynamic-table-config-button"
          [ngClass]="{ 'flat-button': this.values.currentOptionCategories, 'flat-button-disabled': !this.values.currentOptionCategories }" (click)="configureDynamicTable()">
          Configure Dynamic Table
        </button>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Table">
                <mat-icon aria-label="Go To Table">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="isAdvChartPanel()">
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-addmenu-icon-item">
          <mat-icon class="msf-dashboard-chart-icon" aria-label="Filter List">filter_list</mat-icon>
          <span class="msf-dashboard-addmenu-item-text">Chart Configuration</span>
        </div>
      </div>
      <div class="msf-dashboard-panel-sub-container-column">
        <div class="msf-dashboard-chart-options-container">
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">bar_chart</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <div class="msf-dashboard-chart-op-container-row">
                <div class="msf-dashboard-field-valuectrl">
                  <mat-form-field [formGroup]="panelForm" class="msf-full-width">
                    <mat-select formControlName="variableCtrl" placeholder="Analysis by" [(value)]="values.variable" (selectionChange)="checkPanelConfiguration()">
                      <ngx-mat-select-search [formControl]="variableFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                      <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                        {{variable.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="msf-dashboard-field-function">
                  <mat-form-field>
                    <input matInput autocomplete="off" placeholder="Vertical Axis Name" [disabled]="vertAxisDisabled" [(ngModel)]="values.vertAxisName">
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">show_chart</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <div class="msf-dashboard-chart-op-container-row">
                <div class="msf-dashboard-field-valuectrl">
                  <mat-form-field [formGroup]="panelForm">
                    <mat-select formControlName="valueCtrl" placeholder="Aggregation Value" [(value)]="values.valueColumn" (selectionChange)="checkPanelConfiguration()">
                      <ngx-mat-select-search [formControl]="valueFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                      <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                        {{variable.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="msf-dashboard-field-function">
                  <mat-form-field>
                    <input matInput autocomplete="off" placeholder="Horizontal Axis Name" [disabled]="horizAxisDisabled" [(ngModel)]="values.horizAxisName">
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">functions</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <div class="msf-dashboard-chart-op-container-row">
                <div class="msf-dashboard-field-valuectrl">
                  <mat-form-field>
                    <mat-select placeholder="Interval Type" [(ngModel)]="values.intervalType" (ngModelChange)="resetIntervalValue()">
                      <mat-option [value]="'ncile'">By Ncile</mat-option>
                      <mat-option [value]="'value'">By Value</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="msf-dashboard-field-function" *ngIf="values.intervalType === 'ncile'">
                  <mat-form-field>
                    <mat-select placeholder="Ncile" [(ngModel)]="values.intValue">
                      <mat-option *ngFor="let value of nciles" [value]="value">
                        {{value}}%
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="msf-dashboard-field-function" *ngIf="values.intervalType === 'value'">
                  <mat-form-field>
                    <input matInput placeholder="Value" autocomplete="off" [(ngModel)]="values.intValue">
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="msf-dashboard-panel-sub-container-column-reverse">
            <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary" matTooltip="Control Variables">
                <mat-icon aria-label="Control Variables">more_vert</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated && !values.dynTableGenerated" mat-mini-fab (click)="goToResults()" color="primary" matTooltip="Go To Chart">
                <mat-icon aria-label="Go To Chart">bar_chart</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="goToAdditionalSettings()" color="primary" matTooltip="Additional Settings">
                <img src="../../assets/images/additional-options.png"/>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button mat-mini-fab (click)="savePanel(false)" color="primary" matTooltip="Save Changes">
                <mat-icon aria-label="Save Changes">save</mat-icon>
              </button>
            </div>
            <div class="msf-dashboard-panel-control-variable-button">
              <button [disabled]="values.currentOption == null" mat-mini-fab (click)="openAssistant()" color="primary" matTooltip="Wizard">
                <img src="../../assets/images/wizard-icon.png"/>
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
  -->
  <!-- ngIf doesn't work with AmCharts -->
  <div class="{{values.displayChart && !advTableView ? 'msf-dashboard-panel-container-chart' : 'msf-dashboard-panel-container-invisible'}}">
    <div class="msf-dashboard-panel-title" *ngIf="values.displayChart">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard || (globals.readOnlyDashboard && isAdvChartPanel())">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard && !isAdvChartPanel()"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-anchor-container" *ngIf="displayAnchoredArguments">
      <div class="msf-dashboard-panel-anchored-argument" *ngFor="let anchoredArgument of anchoredArguments">
        <div class="anchored-argument-left-side">
          <app-msf-argument [currentArgument]="anchoredArgument.argument" [currentGlobalOptionId]="values.currentOption.id" [anchoredArgument]="true" [updateURLResults]="updateURLResults" (setLoading)="setArgumentLoading(anchoredArgument, $event)" (startURLUpdate)="startURLUpdate()"></app-msf-argument>
        </div>
        <div class="anchored-argument-button">
          <button mat-icon-button class="msf-anchor-button-pressed" matTooltip="Removed Anchored Argument"
            (click)="removedAnchoredArgument(anchoredArgument)">
            <div class="anchor-icon"></div>
          </button>
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-chart-display-container-{{values.id}}">
      <div class="msf-dashboard-map-routelist" *ngIf="isMapPanel() && values.flightRoutes.length">
        <div class="msf-dashboard-map-routelist-container" style="height: calc(100% - 71px)">
          <div class="msf-dashboard-map-routelist-item" *ngFor="let item of values.flightRoutes">
            <div class="msf-dashboard-map-item-flight">
              <span *ngIf="isArray(item.Flight)">{{item.TouchedAirports}}</span>
              <span *ngIf="!isArray(item.Flight)">{{item.Flight.Marketing_Airline}} {{item.Flight.Airline}} - F# {{item.Flight.FlightNo}} {{item.TouchedAirports}}</span>
            </div>
            <div class="msf-dashboard-map-item-checkbox">
              <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="item.checked" (ngModelChange)="toggleMapRoute(item)"></mat-checkbox>
            </div>
          </div>
        </div>
      </div>
      <div id="msf-dashboard-chart-display-{{values.id}}" [style.width.%]="100"></div>
      <div class="msf-dashboard-map-panelinfo" *ngIf="isMapPanel() && checkedRoutes.length == 1">
        <table class="msf-dashboard-map-panelinfo-container">
          <tr><td>Touched Airports</td><td>{{checkedRoutes[0].TouchedAirports}}</td></tr>
          <tr><td>Total Distance</td><td>{{checkedRoutes[0].TotalDistance}}</td></tr>
          <tr><td>Total Time</td><td>{{checkedRoutes[0].TotalTime}}</td></tr>
        </table>
      </div>
    </div>
  </div>
  <div class="msf-dashboard-panel-container-chart msf-dashboard-panel-gridstack" *ngIf="values.displayInfo">
    <div class="msf-dashboard-panel-title">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div style="width: 100%; height: 100%">
        <div class="msf-dashboard-info-display">
          <div class="msf-dashboard-info-container" *ngIf="values.infoVar1">
            <div class="msf-dashboard-info-table" *ngFor="let result of values.lastestResponse">
              <div class="msf-dashboard-info-title">{{result.title}}</div>
              <div class="msf-dashboard-info-value">{{getResultValue(result.value)}}</div>
              <div class="msf-dashboard-info-separator-background">
                <hr class="msf-dashboard-info-separator">
              </div>
              <div class="msf-dashboard-info-measure">{{result.measure}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="msf-dashboard-panel-container-chart msf-dashboard-panel-gridstack" *ngIf="values.displayForm">
    <div class="msf-dashboard-panel-title">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-form-container">
        <div class="msf-media-title-container" id="msf-dashboard-form-display">
          <div class="msf-dashboard-form-display-child" [ngClass]="values.formVariables[column].valueOrientation.value ? 'msf-dashboard-form-display-result-vertical' : 'msf-dashboard-form-display-result-horizontal'" *ngFor="let formResult of values.lastestResponse; let column = index">
            <span class="msf-media-title-value" id="msf-dashboard-form-display-title" [style.font-size.px]="getFormFontSize(column)">{{formResult.column.columnLabel}}: </span>
            <ng-container *ngIf="formResult.column.columnType !== 'number'">
              <span class="msf-media-title-value" id="msf-dashboard-form-display-value" [style.font-size.px]="getValueFormFontSize(column)">{{formResult.value}}</span>
            </ng-container>
            <ng-container *ngIf="formResult.column.columnType === 'number'">
              <span class="msf-media-title-value" id="msf-dashboard-form-display-value" [style.font-size.px]="getValueFormFontSize(column)"><span [ngStyle]="{ 'color' : getValueFormFontColor(formResult) }"><span *ngIf="formResult.column.prefix">{{formResult.column.prefix}}</span>{{formResult.value}}<span *ngIf="formResult.column.suffix">{{formResult.column.suffix}}</span></span></span>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="msf-dashboard-panel-container-chart msf-dashboard-panel-gridstack" *ngIf="values.displayPic">
    <div class="msf-dashboard-panel-title">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="content-panel-img">
        <app-image-link [url]="values.urlImg"></app-image-link>
      </div>
    </div>
  </div>
  <div class="msf-dashboard-panel-container-chart msf-dashboard-panel-gridstack" [style.display]="values.displayTable ? 'block' : 'none'">
    <div class="msf-dashboard-panel-title" [style.padding-bottom.px]="5">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-table-container">
        <div class="msf-dashboard-child-panel-table msf-dashboard-panel-table" style="height: calc(100% - 77px)">
          <app-msf-table #msfTableRef [isLoading]="values.isLoading" 
          (finishLoading)="finishLoadingTable($event)" [categoryArguments]="values.currentOptionCategories"
           [currentOption]="values.currentOption" [isPanel]="true" [thresholds]="values.thresholds"
           [paginator]="paginator" [pageIndex]="pageIndex" 
           (paginatorlength)=paginatorlength($event)
           (shmoreResult)=shmoreResult($event)
           (sortingDataTable)=sortingDataTable($event)></app-msf-table>
        </div>
        <mat-paginator #paginator [pageIndex]="pageI" [pageSize]="pageSize" [length]="lengthpag" hidePageSize
          (page)="pageEvent = getServerData($event)" showFirstLastButtons
          [ngClass]="values.showPaginator && !values.isLoading && (moreResultsBtn || (!moreResultsBtn && actualPageNumber!=0)) ? 
           'msf-paginator-tableDashboard' : 'msf-hide'"></mat-paginator>
        <div [ngClass]="moreResultsBtn ? 'msf-menu-more-button' : 'msf-menu-more-button disabled-more-button'"
          (click)="moreTableResults()" [style.margin-top-px]="3" *ngIf="msfTableRef && msfTableRef.dataSource && !values.showPaginator">
          <img style="width: 16px; height: 16px;" src="../../assets/images/{{globals.theme}}-more.png" class="msf-menu-image msf-vertical-middle msf-line">
          <div class="msf-vertical-middle msf-line" style="font-size: 13px;">More Result</div>
        </div>
        <div *ngIf="!haveTableDataSource()" [style.height.px]="35"></div>
      </div>
    </div>
  </div>
  <div class="msf-dashboard-panel-container-chart msf-dashboard-panel-gridstack" [style.display]="values.displayMapbox ? 'block' : 'none'">
    <div class="msf-dashboard-panel-title">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div style="height: calc(100% - 7px)" class="msf-dashboard-panel-mapbox">
        <app-msf-map #msfMapRef [isLoading]="values.isLoading" [currentOption]="values.currentOption" [useCancelButton]="false" [displayMapMenu]="2" [currentMapType]="values.style" (finishLoading)="finishMapboxLoading($event)"></app-msf-map>
      </div>
    </div>
  </div>
  <div class="msf-dashboard-panel-container-chart msf-dashboard-panel-gridstack" *ngIf="values.displayDynTable">
    <div class="msf-dashboard-panel-title">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="dynamic-table-scroll dashboard-panel-dynamic-table-scroll" style="height: calc(100% - 20px)">
        <table *ngIf="dynTableData" class="mat-elevation-z8 dynamic-table-container">
          <tr class="dynamic-table-header-container" *ngFor="let header of dynTableData.headers">
            <!-- Always insert a blank tab header first since it's a pivot table -->
            <th class="dyanmic-table-padding" [style.top.px]="header.topOffset"></th>
            <th class="dynamic-table-header" [style.top.px]="header.topOffset" *ngFor="let value of header.values" [colSpan]="value.colSpan">{{value.value}}</th>
          </tr>
          <tr class="dynamic-table-body-container" *ngFor="let body of dynTableData.body">
            <ng-container *ngIf="body[0].titleOnly">
              <th class="dynamic-table-yaxis-title" [colSpan]="yAxisColSpan">
                <div [style.margin-left.px]="body[0].margin">{{body[0].value}}</div>
              </th>
            </ng-container>
            <ng-container *ngIf="!body[0].titleOnly">
              <th class="dynamic-table-body-title">{{body[0].value}}</th>
              <td class="dynamic-table-value" *ngFor="let value of body | slice: 1; let valueindex = index"><span *ngIf="body[valueindex + 1]">{{body[valueindex + 1]}}</span></td>
            </ng-container>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <!-- Table view for advanced charts -->
  <div *ngIf="values.displayChart && advTableView" class="msf-dashboard-panel-container-chart msf-dashboard-panel-gridstack">
    <div class="msf-dashboard-panel-title" *ngIf="values.displayChart">
      <div class="msf-dashboard-panel-title-label-icon">
      <div class="msf-dashboard-panel-title-label" *ngIf="!globals.readOnlyDashboard && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-mobile" *ngIf="!globals.readOnlyDashboard && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-read-only" *ngIf="globals.readOnlyDashboard && !public">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public" *ngIf="globals.readOnlyDashboard && public && !isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-title-label msf-dashboard-panel-title-label-public-mobile" matTooltip="{{values.chartName}}" *ngIf="globals.readOnlyDashboard && public && isMobile">{{values.chartName}}</div>
      <div class="msf-dashboard-panel-results-button" (click)="enableContextMenu($event)" *ngIf="!globals.readOnlyDashboard || (globals.readOnlyDashboard && isAdvChartPanel())">...</div>
      <div class="msf-dashboard-panel-results-button" *ngIf="globals.readOnlyDashboard && !isAdvChartPanel()"></div>
      <ng-container *ngIf="public">
        <div class="msf-dashboard-panel-powered-logo">Powered By</div>
        <div class="msf-dashboard-panel-public-mobile-logo" *ngIf="isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightMobileLogoImage() + ')'}"></div>
        <div class="msf-dashboard-panel-public-logo" *ngIf="!isMobile" [ngStyle]="{'background-image': 'url(' + getMasFlightLogoImage() + ')'}"></div>
      </ng-container>
    </div>
    <div class="msf-dashboard-panel-title-description" *ngIf="!globals.readOnlyDashboard">{{values.chartDescription}}</div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-child-panel-table msf-dashboard-panel-table msf-adv-chart-table" style="height: calc(100% - 20px)" [style.width.%]="100" [style.margin-top.px]="5">
        <div class="results-container">
          <table class="mat-elevation-z8 datasource results" style="border-collapse: separate; border-spacing: 0">
            <thead>
              <tr class="mat-header-row">
                <th [style.width.%]="25" class="msf-show-table mat-header-cell" *ngIf="values.variable">{{values.variable.name}}</th>
                <th style="width: 40%; border-left: 0" class="msf-show-table mat-header-cell">Intervals</th>
                <th style="width: 25%; border-left: 0" class="msf-show-table mat-header-cell">{{values.valueColumn.name}}</th>
                <th style="width: 10%; border-left: 0" class="msf-show-table mat-header-cell">Sum</th>
              </tr>
            </thead>
            <tbody>
              <tr class="mat-row" *ngFor="let row of intervalTableRows">
                <td [style.width.%]="25" class="msf-show-table mat-cell" *ngIf="row.key">{{row.key}}</td>
                <td [style.width.%]="40" class="msf-show-table mat-cell">{{row.Interval}}</td>
                <td [style.width.%]="25" class="msf-show-table mat-cell">{{row.value | number:'.0-2':'en'}}</td>
                <td [style.width.%]="10" class="msf-show-table mat-cell">{{row.sum | number:'.0-2':'en'}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
