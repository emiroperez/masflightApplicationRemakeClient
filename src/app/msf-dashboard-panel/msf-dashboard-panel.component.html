<div class="msf-dashboard-panel-container" [style.height.px]="panelHeight" *ngIf="!values.displayChart && !values.displayInfo && !values.displayForm && !values.displayPic && !values.displayTable && !values.displayMapbox && globals.readOnlyDashboard">
  <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
    <div class="msf-dashboard-panel-picture-label-container">
      <div class="msf-dashboard-panel-picture-label">
        This panel has no results generated
      </div>
    </div>
  </div>
</div>
<div class="msf-dashboard-panel-container" [style.height.px]="panelHeight" *ngIf="!values.displayChart && !values.displayInfo && !values.displayForm && !values.displayPic && !values.displayTable && !values.displayMapbox && !globals.readOnlyDashboard">
  <div class="msf-dashboard-panel-sub-container-column">
    <div class="msf-dashboard-panel-sub-container-row">
      <mat-form-field class="msf-width-80">
        <input matInput autocomplete="off" type="text" placeholder="Panel Name" [(ngModel)]="values.chartName"/>
      </mat-form-field>
    </div>
  </div>
  <div class="msf-dashboard-panel-sub-container-column">
    <div class="msf-dashboard-panel-sub-container-row">
      <mat-form-field [formGroup]="chartForm" class="msf-full-width">
        <mat-select formControlName="dataFormCtrl" placeholder="Select Data From" [(value)]="values.currentOption" (selectionChange)="loadChartFilterValues($event.value)">
          <ngx-mat-select-search [formControl]="dataFormFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
          <mat-option *ngFor="let option of filteredOptions | async | panelOptionFilter:values.currentChartType" [value]="option">
            {{option.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="msf-dashboard-panel-sub-container-row msf-dashboard-panel-sub-container-space msf-dashboard-panel-chart-type">
      <mat-form-field class="msf-full-width">
        <mat-select placeholder="Panel Type" [(ngModel)]="values.currentChartType" (selectionChange)="checkChartType()">
          <mat-option *ngFor="let panelType of chartTypes | panelTypeFilter:globals.currentApplication.name" [value]="panelType">
            {{panelType.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="msf-dashboard-panel-sub-container-row msf-dashboard-panel-sub-container-checkbox msf-dashboard-panel-interval-time">
      <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="values.updateIntervalSwitch" (ngModelChange)="toggleIntervalInput()"></mat-checkbox>
      <mat-form-field [formGroup]="chartForm" class="msf-full-width">
        <input matInput formControlName="intervalCtrl" autocomplete="off" type="number" placeholder="Update Interval (In Minutes)" [(value)]="values.updateTimeLeft"/>
      </mat-form-field>
    </div>
  </div>
  <ng-container *ngIf="!isInformationPanel() && !isSimpleFormPanel() && !isPicturePanel() && !isTablePanel() && !isMapPanel() && !isHeatMapPanel() && !isMapboxPanel()">
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-addmenu-icon-item">
        <mat-icon class="msf-dashboard-chart-icon" aria-label="Filter List">filter_list</mat-icon>
        <span class="msf-dashboard-addmenu-item-text">Chart Configuration</span>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">bar_chart</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="variableCtrl" placeholder="Analysis by" #variableSelect [(value)]="values.variable" (selectionChange)="checkChartFilters()">
                <ngx-mat-select-search [formControl]="variableFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                  {{variable.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">multiline_chart</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="xaxisCtrl" placeholder="x - Axis" #xaxisSelect [(value)]="values.xaxis" (selectionChange)="checkChartFilters()">
                <ngx-mat-select-search [formControl]="xaxisFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                  {{variable.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">show_chart</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <div class="msf-dashboard-chart-op-container-row">
              <div class="msf-dashboard-field-valuectrl">
                <mat-form-field [formGroup]="chartForm">
                  <mat-select formControlName="valueCtrl" placeholder="Values" #valueSelect [(value)]="values.valueColumn" (selectionChange)="checkChartFilters()">
                    <ngx-mat-select-search [formControl]="valueFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                    <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                      {{variable.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="msf-dashboard-field-function">
                <mat-form-field>
                  <mat-select placeholder="Function" [(ngModel)]="values.function">
                    <mat-option *ngFor="let fun of functions" [value]="fun">
                      {{fun.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Chart">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="goToColorPicker()" color="primary">
              <mat-icon aria-label="Color Picker">palette</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="values.currentOption == null || !values.currentOption.drillDownOptions.length" mat-mini-fab (click)="goToDrillDownSettings()" color="primary">
              <mat-icon aria-label="Drill Down">subtitles</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="isInformationPanel()">
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-panel-sub-container-row">
        <div class="msf-dashboard-chart-options-container msf-dashboard-info-chart-options">
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">table_chart</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="chartForm" class="msf-full-width">
                <mat-select formControlName="infoNumVarCtrl" placeholder="Number of variables" [(value)]="values.infoNumVariables" (selectionChange)="checkNumVariables()">
                  <mat-option *ngFor="let number of [1,2,3]" [value]="number">
                    {{number}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">filter_1</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="chartForm" class="msf-full-width">
                <mat-select formControlName="infoVar1Ctrl" placeholder="Variable #1" [(value)]="values.infoVar1">
                  <ngx-mat-select-search [formControl]="infoVar1FilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                  <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                    {{variable.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <button [disabled]="!values.infoVar1" mat-icon-button (click)="goToFunctions(0)" [ngClass]="values.infoVar1 ? 'func-button' : 'func-button-disabled'">
              <mat-icon aria-label="Functions for Variable #1">more_horiz</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">filter_2</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="chartForm" class="msf-full-width">
                <mat-select formControlName="infoVar2Ctrl" placeholder="Variable #2" [(value)]="values.infoVar2">
                  <ngx-mat-select-search [formControl]="infoVar2FilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                  <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                    {{variable.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <button [disabled]="!values.infoVar2" mat-icon-button (click)="goToFunctions(1)" [ngClass]="values.infoVar2 ? 'func-button' : 'func-button-disabled'">
              <mat-icon aria-label="Functions for Variable #2">more_horiz</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-chart-selector">
            <div class="msf-dashboard-chart-analysis-title">
              <mat-icon class="msf-dashboard-chart-icon">filter_3</mat-icon>
            </div>
            <div class="msf-dashboard-chart-op-container">
              <mat-form-field [formGroup]="chartForm" class="msf-full-width">
                <mat-select formControlName="infoVar3Ctrl" placeholder="Variable #3" [(value)]="values.infoVar3">
                  <ngx-mat-select-search [formControl]="infoVar3FilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                  <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                    {{variable.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <button [disabled]="!values.infoVar3" mat-icon-button (click)="goToFunctions(2)" [ngClass]="values.infoVar3 ? 'func-button' : 'func-button-disabled'">
              <mat-icon aria-label="Functions for Variable #3">more_horiz</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Information">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="isSimpleFormPanel()">
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-form-sub-container">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">list</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="columnCtrl" placeholder="Select Column">
                <ngx-mat-select-search [formControl]="columnFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                  {{variable.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="fontSizeCtrl" placeholder="Title Font Size">
                <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                  {{fontSize.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="valueFontSizeCtrl" placeholder="Value Font Size">
                <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                  {{fontSize.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="valueOrientationCtrl" placeholder="Value Orientation">
                <mat-option *ngFor="let orientation of orientations" [value]="orientation">
                  {{orientation.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="msf-dashboard-chart-add-button" id="msf-dashboard-form-button">
            <button [disabled]="!isFormColumnValid()" mat-icon-button (click)="addColumnIntoForm()" [ngClass]="isFormColumnValid() ? 'func-button' : 'func-button-disabled'">
              <mat-icon class="msf-dashboard-chart-icon" aria-label="Add Column">add</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div #formScrollContainer class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-form-container-column" *ngIf="values.formVariables.length" [ngStyle]="{'overflow-y': ((values.height.value < 6 && values.formVariables.length > 2) || (values.height.value >= 6 && values.formVariables.length > 3)) ? 'scroll' : 'hidden'}" cdkDropList [cdkDropListData]="values.formVariables" cdkDropListOrientation="vertical" (cdkDropListDropped)="swapFormVariablePositions($event)">
      <div class="msf-dashboard-panel-sub-container-row" id="msf-dashboard-panel-form-container-row" *ngFor="let formVariable of values.formVariables; let column = index" cdkDragLockAxis="y" vsDragScroll [vsDragScrollContainer]="formScrollContainer" cdkDrag>
        <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
          <mat-form-field class="msf-full-width">
            <mat-select [(value)]="formVariable.column" placeholder="Select Column">
              <ngx-mat-select-search [formControl]="columnFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
              <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                {{variable.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
          <mat-form-field class="msf-full-width">
            <mat-select [(value)]="formVariable.fontSize" placeholder="Title Font Size">
              <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                {{fontSize.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
          <mat-form-field class="msf-full-width">
            <mat-select [(value)]="formVariable.valueFontSize" placeholder="Value Font Size">
              <mat-option *ngFor="let fontSize of fontSizes" [value]="fontSize">
                {{fontSize.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-form-op-container">
          <mat-form-field class="msf-full-width">
            <mat-select [(value)]="formVariable.valueOrientation" placeholder="Value Orientation">
              <mat-option *ngFor="let orientation of orientations" [value]="orientation">
                {{orientation.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="msf-dashboard-chart-add-button" id="msf-dashboard-form-button">
          <div class="mat-icon-drag-button">
            <div class="msf-dashboard-chart-move-icon" cdkDragHandle></div>
          </div>
        </div>
        <div class="msf-dashboard-chart-add-button" id="msf-dashboard-form-button">
          <button mat-icon-button (click)="deleteColumnFromForm(column)">
            <mat-icon class="msf-dashboard-chart-icon" aria-label="Delete Column">delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-form-container-column-empty" *ngIf="!values.formVariables.length">
      <div class="msf-no-results">
        The form doesn't contain any columns
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Form">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="goToColorPicker()" color="primary">
              <mat-icon aria-label="Thresholds">palette</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="isPicturePanel()">
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
      <div class="msf-dashboard-panel-picture-label-container">
        <div class="msf-dashboard-panel-picture-label">
          Set the control variables before generating the picture!
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Picture">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="isMapPanel()">
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
      <div class="msf-dashboard-panel-picture-label-container">
        <div class="msf-dashboard-panel-picture-label">
          Set the control variables before generating the map!
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Map">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="isHeatMapPanel()">
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-addmenu-icon-item">
        <mat-icon class="msf-dashboard-chart-icon" aria-label="Heat Map Variable">filter_list</mat-icon>
        <span class="msf-dashboard-addmenu-item-text">Heat Map Configuration</span>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">place</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select placeholder="Geography Data" [(ngModel)]="values.geodata">
                <mat-option *ngFor="let geodata of geodatas" [value]="geodata">
                  {{geodata.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">vpn_key</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="geodataKeyCtrl" placeholder="Geography Data Key" #valueSelect [(value)]="values.valueColumn" (selectionChange)="checkChartFilters()">
                <ngx-mat-select-search [formControl]="valueFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                  {{variable.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">data_usage</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field [formGroup]="chartForm" class="msf-full-width">
              <mat-select formControlName="geodataValueCtrl" placeholder="Value To Display" #variableSelect [(value)]="values.variable" (selectionChange)="checkChartFilters()">
                <ngx-mat-select-search [formControl]="variableFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                <mat-option *ngFor="let variable of filteredVariables | async" [value]="variable">
                  {{variable.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Picture">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="goToColorPicker()" color="primary">
              <mat-icon aria-label="Color Picker">palette</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="isMapboxPanel()">
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-picture-container">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">style</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select placeholder="Style" [(ngModel)]="values.analysis">
                <mat-option *ngFor="let style of styles" [value]="style">
                  {{style.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="msf-dashboard-chart-selector">
          <div class="msf-dashboard-chart-analysis-title">
            <mat-icon class="msf-dashboard-chart-icon">brush</mat-icon>
          </div>
          <div class="msf-dashboard-chart-op-container">
            <mat-form-field class="msf-full-width">
              <mat-select placeholder="Theme" [(ngModel)]="values.valueColumn">
                <mat-option *ngFor="let theme of themes" [value]="theme">
                  {{theme.name}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Map">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="isTablePanel()">
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-addmenu-icon-item">
        <mat-icon class="msf-dashboard-chart-icon" aria-label="Filter List">filter_list</mat-icon>
        <span class="msf-dashboard-addmenu-item-text">Column Selector</span>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard-panel-form-container-column" [ngStyle]="{'overflow-y': ((values.height.value < 6 && values.tableVariables.length > 2) || (values.height.value >= 6 && values.tableVariables.length > 3)) ? 'scroll' : 'hidden'}">
      <div class="msf-dashboard-panel-sub-container-row" id="msf-dashboard-panel-table-container-row" *ngFor="let tableVariable of values.tableVariables">
        <div class="msf-dashboard-chart-op-container" id="msf-dashboard-panel-table-op-container">
          <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="tableVariable.checked">
            {{tableVariable.name}}
          </mat-checkbox>
        </div>
      </div>
    </div>
    <div class="msf-dashboard-panel-sub-container-column">
      <div class="msf-dashboard-chart-options-container">
        <div class="msf-dashboard-panel-sub-container-column-reverse">
          <button [disabled]="!generateBtnEnabled" mat-flat-button [ngClass]="generateBtnEnabled ? 'flat-button' : 'flat-button-disabled'" (click)="loadData()">Generate</button>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!variableCtrlBtnEnabled" mat-mini-fab (click)="goToControlVariables()" color="primary">
              <mat-icon aria-label="Control Variables">more_vert</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button [disabled]="!values.chartGenerated && !values.infoGenerated && !values.formGenerated && !values.picGenerated && !values.tableGenerated && !values.mapboxGenerated" mat-mini-fab (click)="goToChart()" color="primary">
              <mat-icon aria-label="Go To Table">bar_chart</mat-icon>
            </button>
          </div>
          <div class="msf-dashboard-panel-control-variable-button">
            <button mat-mini-fab (click)="savePanel()" color="primary">
              <mat-icon aria-label="Save Changes">save</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
<!-- ngIf doesn't work with AmCharts -->
<div class="{{values.displayChart ? 'msf-dashboard-panel-container-chart' : 'msf-dashboard-panel-container-invisible'}}" [style.height.px]="panelHeight">
  <div class="msf-dashboard-panel-title" *ngIf="values.displayChart">{{values.chartName}}</div>
  <div class="msf-dashboard-panel-sub-container-column" id="msf-dashboard.chart-display-container-{{values.id}}">
    <div class="msf-dashboard-map-routelist" *ngIf="isMapPanel() && values.flightRoutes != null">
      <div class="msf-dashboard-map-routelist-container" [style.height.px]="calcRouteListHeight()">
        <div class="msf-dashboard-map-routelist-item" *ngFor="let item of values.flightRoutes">
          <div class="msf-dashboard-map-item-flight">
            {{item.Flight.Marketing_Airline}} {{item.Flight.Airline}} - F# {{item.Flight.FlightNo}} {{item.TouchedAirports}}
          </div>
          <div class="msf-dashboard-map-item-checkbox">
            <mat-checkbox class="cancels-checkbox" style="display: inline-block;" [(ngModel)]="item.checked" (ngModelChange)="toggleMapRoute(item)"></mat-checkbox>
          </div>
        </div>
      </div>
    </div>
    <div id="msf-dashboard-chart-display-{{values.id}}" [ngStyle]="{'width': (globals.readOnlyDashboard || isMapPanel()) ? '100%' : 'calc(100% - 35px)'}" [style.height.px]="calcPanelHeight()"></div>
    <div class="msf-dashboard-map-panelinfo" *ngIf="isMapPanel() && checkedRoutes.length == 1">
      <table class="msf-dashboard-map-panelinfo-container">
        <tr><td>Touched Airports</td><td>{{checkedRoutes[0].TouchedAirports}}</td></tr>
        <tr><td>Total Distance</td><td>{{checkedRoutes[0].TotalDistance}}</td></tr>
        <tr><td>Total Time</td><td>{{checkedRoutes[0].TotalTime}}</td></tr>
      </table>
    </div>
    <div class="msf-dashboard-panel-config-button" *ngIf="!globals.readOnlyDashboard">
      <button mat-mini-fab (click)="goToChartConfiguration()" color="primary">
        <mat-icon aria-label="Edit Configuration">menu</mat-icon>
      </button>
      <button mat-mini-fab color="primary" style="margin-bottom: 7px" (click)="sharePanel()">
        <mat-icon aria-label="Share Panel">share</mat-icon>
      </button>
    </div>
  </div>
</div>
<div class="msf-dashboard-panel-container-chart" *ngIf="values.displayInfo" [style.height.px]="panelHeight">
  <div class="msf-dashboard-panel-title">{{values.chartName}}</div>
  <div class="msf-dashboard-panel-sub-container-column">
    <div class="msf-dashboard-panel-config-button" *ngIf="!globals.readOnlyDashboard">
      <button mat-mini-fab (click)="goToInfoConfiguration()" color="primary">
        <mat-icon aria-label="Edit Configuration">menu</mat-icon>
      </button>
      <button mat-mini-fab color="primary" style="margin-bottom: 7px" (click)="sharePanel()">
        <mat-icon aria-label="Share Panel">share</mat-icon>
      </button>
    </div>
    <div style="width: 100%" [style.height.px]="calcPanelHeight()">
      <div class="msf-dashboard-info-display">
        <div class="msf-dashboard-info-container" *ngIf="values.infoVar1">
          <div class="msf-dashboard-info-table" *ngFor="let result of values.lastestResponse">
            <div class="msf-dashboard-info-title">{{result.title}}</div>
            <div class="msf-dashboard-info-value">{{getResultValue(result.value)}}</div>
            <div class="msf-dashboard-info-separator-background">
              <hr class="msf-dashboard-info-separator">
            </div>
            <div class="msf-dashboard-info-measure">{{result.measure}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="msf-dashboard-panel-container-chart" *ngIf="values.displayForm" [style.height.px]="panelHeight">
  <div class="msf-dashboard-panel-title">{{values.chartName}}</div>
  <div class="msf-dashboard-panel-sub-container-column">
    <div class="msf-dashboard-panel-config-button" *ngIf="!globals.readOnlyDashboard">
      <button mat-mini-fab (click)="goToFormConfiguration()" color="primary">
        <mat-icon aria-label="Edit Configuration">menu</mat-icon>
      </button>
      <button mat-mini-fab color="primary" style="margin-bottom: 7px" (click)="sharePanel()">
        <mat-icon aria-label="Share Panel">share</mat-icon>
      </button>
    </div>
    <div style="width: 100%; display: table" [style.height.px]="calcPanelHeight()">
      <div class="msf-media-title-container" id="msf-dashboard-form-display">
        <div [ngClass]="values.formVariables[column].valueOrientation.value ? 'msf-dashboard-form-display-result-vertical' : 'msf-dashboard-form-display-result-horizontal'" *ngFor="let formResult of values.lastestResponse; let column = index">
          <span class="msf-media-title-value" id="msf-dashboard-form-display-title" [style.font-size.px]="getFormFontSize(column)">{{formResult.column.name}}: </span>
          <span class="msf-media-title-value" id="msf-dashboard-form-display-value" [style.font-size.px]="getValueFormFontSize(column)" [style.color]="getColor(formResult.value)">{{formResult.value}}</span>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="msf-dashboard-panel-container-chart" *ngIf="values.displayPic" [style.height.px]="panelHeight">
  <div class="msf-dashboard-panel-title"><br></div>
  <div class="msf-dashboard-panel-sub-container-column">
    <div class="msf-dashboard-panel-config-button" *ngIf="!globals.readOnlyDashboard">
      <button mat-mini-fab (click)="goToFormConfiguration()" color="primary">
        <mat-icon aria-label="Edit Configuration">menu</mat-icon>
      </button>
      <button mat-mini-fab color="primary" style="margin-bottom: 7px" (click)="sharePanel()">
        <mat-icon aria-label="Share Panel">share</mat-icon>
      </button>
    </div>
    <div [style.height.px]="calcPanelHeight()">
      <!-- TODO: Picture goes here -->
    </div>
  </div>
</div>
<div class="msf-dashboard-panel-container-chart" [style.display]="values.displayTable ? 'block' : 'none'" [style.height.px]="panelHeight">
  <div class="msf-dashboard-panel-title" [style.padding-bottom.px]="5">{{values.chartName}}</div>
  <div class="msf-dashboard-panel-sub-container-column">
    <div class="msf-dashboard-panel-config-button" *ngIf="!globals.readOnlyDashboard">
      <button mat-mini-fab (click)="goToTableConfiguration()" color="primary">
        <mat-icon aria-label="Edit Configuration">menu</mat-icon>
      </button>
      <button mat-mini-fab color="primary" style="margin-bottom: 7px" (click)="sharePanel()">
        <mat-icon aria-label="Share Panel">share</mat-icon>
      </button>
    </div>
    <div class="msf-dashboard-table-container">
      <div class="msf-dashboard-child-panel-table msf-dashboard-panel-table" [style.height.px]="calcPanelHeight() - 39">
        <app-msf-table #msfTableRef [isLoading]="values.isLoading" (finishLoading)="finishLoadingTable($event)" [categoryArguments]="values.currentOptionCategories" [currentOption]="values.currentOption" [isPanel]="true"></app-msf-table>
      </div>
      <div [ngClass]="moreResultsBtn ? 'msf-menu-more-button' : 'msf-menu-more-button disabled-more-button'"
          (click)="moreTableResults()" *ngIf="msfTableRef && msfTableRef.dataSource">
        <img style="width: 16px;height: 16px;" src="../../assets/images/more.png" class="msf-menu-image msf-vertical-middle msf-line">
        <div class="msf-vertical-middle msf-line" style="font-size: 13px">More Result</div>
      </div>
      <div *ngIf="!haveTableDataSource()" [style.height.px]="35"></div>
    </div>
  </div>
</div>
<div class="msf-dashboard-panel-container-chart" [style.display]="values.displayMapbox ? 'block' : 'none'" [style.height.px]="panelHeight">
  <div class="msf-dashboard-panel-title">{{values.chartName}}</div>
  <div class="msf-dashboard-panel-sub-container-column">
    <div class="msf-dashboard-panel-config-button" *ngIf="!globals.readOnlyDashboard">
      <button mat-mini-fab (click)="goToMapboxConfiguration()" color="primary">
        <mat-icon aria-label="Edit Configuration">menu</mat-icon>
      </button>
      <button mat-mini-fab color="primary" style="margin-bottom: 7px" (click)="sharePanel()">
        <mat-icon aria-label="Share Panel">share</mat-icon>
      </button>
    </div>
    <div [style.height.px]="calcPanelHeight()" style="width: calc(100% - 50px)">
      <app-msf-map #msfMapRef [isLoading]="values.isLoading" [heightOffset]="50" [useCancelButton]="false" [currentMapType]="values.analysis" [currentMapStyle]="values.valueColumn" (finishLoading)="finishMapboxLoading($event)"></app-msf-map>
    </div>
  </div>
</div>