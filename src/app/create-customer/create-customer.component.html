<div style="overflow: auto" [style.height.px]="getInnerHeight()" [style.width.px]="getInnerWidth()">
  <div class="msf-register-header" style="color: white">
    <button mat-icon-button routerLink="/application">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <img class="msf-medium-logo" src="../../assets/images/logo.png" />
    <div class="msf-register-header-content msf-arguments-category-header">
      <div class="msf-register-header-title">
        <div class="msf-register-header-title-content msf-arguments-category-header-title-content">
          CUSTOMERS<br>
        </div>
      </div>
      <div class="msf-register-header-image-content">
        <img class="medium-user-image" src="../../assets/images/icon-user-white.png" />
      </div>
    </div>
  </div>
  <mat-card class="msf-customer-card-container msf-center-container">
    <div class="msf-customer-container">
      <div class="msf-customer-input-field">
        <mat-form-field class="msf-customer-filter-text-field">
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
          <mat-icon class="msf-customer-search-icon" aria-label="search">search</mat-icon>
        </mat-form-field>
        <button class="msf-customer-button" mat-icon-button (click)="createCustomer()">
          <mat-icon class="msf-customer-button-icon" aria-label="create">add_circle</mat-icon>
        </button>
        <button class="msf-customer-button" mat-icon-button (click)="saveCustomers()">
          <mat-icon class="msf-customer-button-icon" aria-label="save">save</mat-icon>
        </button>
      </div>
      <div class="msf-customer-two-columns">
        <div class="msf-customer-left-container">
          <div class="mat-elevation-z8">
            <div class="msf-customer-table-scroll" [ngStyle]="{ 'height': getTableHeight() }">
              <table mat-table matSort [dataSource]="customerTable" class="datasource welcome-table msf-customer-table">
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                  <td mat-cell *matCellDef="let element">{{ element.name }}</td>
                </ng-container>
                <ng-container matColumnDef="shortName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Short Name</th>
                  <td mat-cell *matCellDef="let element">{{ element.shortName }}</td>
                </ng-container>
                <ng-container matColumnDef="licenseType">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>License Type</th>
                  <td mat-cell *matCellDef="let element">{{ getPlanName(element.licenseType) }}</td>
                </ng-container>
                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
                  <td mat-cell *matCellDef="let element">{{ getStatusName(element.status) }}</td>
                </ng-container>
                <ng-container matColumnDef="endDate">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>End Date</th>
                  <td mat-cell *matCellDef="let element">{{ parseDate(element.endDate) }}</td>
                </ng-container>
                <ng-container matColumnDef="numberOfLicenses">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Number Of Licenses</th>
                  <td mat-cell *matCellDef="let element">{{ element.numberOfLicenses }}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="customerColumns"></tr>
                <tr mat-row [ngClass]="{ 'mat-row-highlighted': row.highlight }" *matRowDef="let row; columns: customerColumns;" (click)="selectCustomer(row)"></tr>
              </table>
            </div>
            <mat-paginator class="msf-customer-paginator" [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons></mat-paginator>
          </div>
        </div>
        <div class="msf-customer-right-container">
          <div class="mat-elevation-z8">
            <h1 class="msf-customer-right-header">
              Edit Customer
            </h1>
            <div class="msf-customer-right-editor" [ngStyle]="{ 'height': getEditorHeight() }">
              <div class="msf-customer-left-edit-panel">
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Name" [(ngModel)]="selectedCustomer.name"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="number" placeholder="Customer Code" [(ngModel)]="selectedCustomer.customerCode"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <mat-select placeholder="Type" autocomplete="off" [(ngModel)]="selectedCustomer.type">
                    <mat-option [value]="0">Internal</mat-option>
                    <mat-option [value]="1">Airline</mat-option>
                    <mat-option [value]="2">Airport</mat-option>
                    <mat-option [value]="3">Custom</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <mat-select placeholder="Status" autocomplete="off" [(ngModel)]="selectedCustomer.status">
                    <mat-option *ngFor="let status of statuses" [value]="status.value">
                      {{status.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <mat-select placeholder="State" autocomplete="off" [(ngModel)]="selectedCustomer.state">
                    <ngx-mat-select-search [formControl]="stateFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                    <mat-option *ngFor="let state of filteredStates | async" [value]="state">
                      {{state.fullName}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Address 1" [(ngModel)]="selectedCustomer.address1"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="number" placeholder="Zip Code" [(ngModel)]="selectedCustomer.zipCode"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <!-- TODO: Create a dialog for the license type -->
                  <mat-select placeholder="License Type" autocomplete="off" [(ngModel)]="selectedCustomer.licenseType">
                    <mat-option *ngFor="let plan of plans" [value]="plan">
                      {{plan.name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" [matDatepicker]="startDatePicker" placeholder="Start Date" [(ngModel)]="selectedCustomer.startDate">
                  <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
                  <mat-datepicker #startDatePicker></mat-datepicker>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <mat-select autocomplete="off" placeholder="Payment Type" [(ngModel)]="selectedCustomer.paymentType">
                    <mat-option [value]="0">Credit Card</mat-option>
                    <mat-option [value]="1">PayPal</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="msf-customer-right-edit-panel">
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Short Name" [(ngModel)]="selectedCustomer.shortName"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Contact Full Name" [(ngModel)]="selectedCustomer.contactFullName"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Contact E-Mail" [(ngModel)]="selectedCustomer.contactEmail"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <mat-select placeholder="Country" autocomplete="off" [(ngModel)]="selectedCustomer.country" (ngModelChange)="countryChangeEvent($event)">
                    <ngx-mat-select-search [formControl]="countryFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Not Found"></ngx-mat-select-search>
                    <mat-option *ngFor="let country of filteredCountries | async" [value]="country">
                      {{country.fullName}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="City" [(ngModel)]="selectedCustomer.city"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Address 2" [(ngModel)]="selectedCustomer.address2"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Billing Type" [(ngModel)]="selectedCustomer.billingType"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="number" placeholder="Number of Licenses" [(ngModel)]="selectedCustomer.numberOfLicenses"/>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" [matDatepicker]="endDatePicker" placeholder="End Date" [(ngModel)]="selectedCustomer.endDate">
                  <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
                  <mat-datepicker #endDatePicker></mat-datepicker>
                </mat-form-field>
                <mat-form-field class="customer-form-field">
                  <input matInput autocomplete="off" type="text" placeholder="Terms" [(ngModel)]="selectedCustomer.terms"/>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </mat-card>
</div>